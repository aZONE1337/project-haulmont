-- patient table

create table if not exists patient
(
    ID             bigint generated by default as identity
        (start with 1, increment by 1) not null primary key,
    first_name     nvarchar(32) not null,
    middle_name    nvarchar(32) not null,
    last_name      nvarchar(32) not null,
    phone          nvarchar(32) not null
);

-- doctor table

create table if not exists doctor
(
    id             bigint generated by default as identity
        (start with 1, increment by 1) not null primary key,
    first_name     nvarchar(32) not null,
    middle_name    nvarchar(32) not null,
    last_name      nvarchar(32) not null,
    specialization nvarchar(32) not null
);

-- receipt table

create table if not exists receipt
(
    id               bigint generated by default as identity
        (start with 1, increment by 1) not null primary key,
    description      nvarchar(160) not null,
    patient_id       bigint        not null,
    doctor_id        bigint        not null,
    date date                 	   not null,
    expiration_date  date          not null,
    priority         nvarchar(16)  not null,
        --
    constraint FK_PATIENT_RECEIPT foreign key (patient_id) references patient(id) on delete cascade,
    constraint FK_DOCTOR_RECEIPT foreign key (doctor_id) references doctor(id) on delete cascade
);

-- patients table

INSERT INTO patient(first_name, middle_name, last_name, phone) VALUES
('Александр', 'Александров', 'Сергеевич', '89273225323');
INSERT INTO patient(first_name, middle_name, last_name, phone) VALUES
('Иван', 'Ивавнов', 'Иванович', '89271235323');
INSERT INTO patient(first_name, middle_name, last_name, phone) VALUES
('Александр', 'Пушкин', 'Сергеевич', '89279813254');
INSERT INTO patient(first_name, middle_name, last_name, phone) VALUES
('Сергей', 'Королёв', 'Павлович', '89279182343');

-- doctors table

INSERT INTO doctor(first_name, middle_name, last_name, specialization) VALUES
('Вадив', 'Петров', 'Петрович', 'Окулист');
INSERT INTO doctor(first_name, middle_name, last_name, specialization) VALUES
('Андрей', 'Чубаров', 'Сергеевич', 'Хирург');
INSERT INTO doctor(first_name, middle_name, last_name, specialization) VALUES
('Иван', 'Марков', 'Семакович', 'Хирург');
INSERT INTO doctor(first_name, middle_name, last_name, specialization) VALUES
('Люций', 'Николаевич', 'Маркович', 'Педиатр');

-- receipts table

INSERT INTO receipt(description, patient_id, doctor_id, date, expiration_date, priority) VALUES
('Бла бла бла', 1, 1, '2020-06-20', '2020-07-20', 'Нормальный');
INSERT INTO receipt(description, patient_id, doctor_id, date, expiration_date, priority) VALUES
('Фу бар', 2, 1, '2020-01-10', '2020-02-13', 'Срочный');
